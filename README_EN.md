# MyBatisCodeHelper-Pro

[![Jetbrains Plugins](https://img.shields.io/badge/plugin-9837-orange.svg)][plugin]
[![Version](http://phpstorm.espend.de/badge/9837/version)][plugin]
[![Downloads](http://phpstorm.espend.de/badge/9837/downloads)][plugin]
[![Downloads last month](http://phpstorm.espend.de/badge/9837/last-month)][plugin]

<div align="right">
<a href="README.md">中文</a>
</div>

Intellij code generate plugin. support to generate mybatis dao interface,mapper xml and create table sql base on domain class, use method name to generate mybatis sql.

-----------------------------------------------------------------------

## paypal me 5 dollar to use 1 year.

* [buy](https://paypal.me/gejun123456/5)

* i will send you the activite code after receive the money.

* stay contact with me by email: gejun123456@gmail.com



The difference between pro version and free version.

- support to generate if test on method name to xml
- support generate multiple column index and multiple column unique
- support generate max,min,sum function on method name to xml
- support findOne,startingwith,endingwith,after,before grammar
- support to generate dto on find multiple field
- support to generate service and service interface
- not using as pojo as param
- fix to support java.lang.Byte

and will later add more feature, the free version will no longer maintained.


#### use method name to generate sql in xml   
![generateMultiple](http://ogyxv3y5w.bkt.clouddn.com/generate_multiple_method.gif)

#### generate mybatis dao interface, mapper xml by domain class, support dao interface jump to mybatis mapper file    
![generateFile](http://ogyxv3y5w.bkt.clouddn.com/20170712_generateFiles.gif)


#### generate mybatis sql base on method name    
![find](http://ogyxv3y5w.bkt.clouddn.com/find.gif)
![update](http://ogyxv3y5w.bkt.clouddn.com/update.gif)
![delete](http://ogyxv3y5w.bkt.clouddn.com/delete.gif)
![count](http://ogyxv3y5w.bkt.clouddn.com/count.gif)
![all_1](http://ogyxv3y5w.bkt.clouddn.com/all_1.gif)

#### refactor mybatis interface method name  
![refacterMethodName](http://ogyxv3y5w.bkt.clouddn.com/refactor_method_name.gif)

#### auto complete for mybatis xml  

![autocomplete](http://ogyxv3y5w.bkt.clouddn.com/autoComplete.gif)

#### resultMap refid jump to definition and refactor

![resultMap](http://ogyxv3y5w.bkt.clouddn.com/resultMapJump.gif)

#### auto complete property refid resultMap

![property complete](http://ogyxv3y5w.bkt.clouddn.com/propertyComplete.gif)

Installation
----

support following product build version > 141

- Android Studio
- IntelliJ IDEA
- IntelliJ IDEA Community Edition


**using IDE plugin system**
- <kbd>Preferences(Settings)</kbd> > <kbd>Plugins</kbd> > <kbd>Browse repositories...</kbd> > <kbd>find "MybatisCodeHelper-Pro"</kbd> > <kbd>Install Plugin</kbd>

**Manual**
- download[`lastest plugin zip`](http://ogyxv3y5w.bkt.clouddn.com/MyBatisCodeHelper-Pro-1.6.2.zip) -> <kbd>Preferences(Settings)</kbd> > <kbd>Plugins</kbd> > <kbd>Install plugin from disk...</kbd>


restart**IDE**.

How to use
--------------------------------------------------------------------------
- use alt+insert (generate mybatis files) on domain class to generate corresponding dao interface and mapper xml (on mac use with ctrl+N  which is the shortcut of generate getter/setter)
- use alt+enter on mybatis dao interface to generate mybatis sql in mapper xml. and it will also complete your method with param and returnType.  

- in order to use method to generate mapper sql, you need to hava a insert or save or add method in your dao inteface and hava domain class as the first parameter. ( which can be auto generated by domainClass using alt+insert)
- method name generated mapper sql will use column name defined in domain class type resultMap in mapper xml.



following are current support for domain object field type. 

| java type            |  startSupportVersion|
|----------------------|-------------------  |
| java.lang.Integer    |   v1.2              |
| java.lang.Long       |   v1.2              |
| java.lang.FLoat      |   v1.2              |
| java.lang.Double     |   v1.2              |
| java.lang.Boolean    |   v1.2              |
| java.util.Date       |   v1.2              |
| java.lang.String     |   v1.2              |
| java.math.BigDecimal |   v1.2              |
| java.lang.Short      |   v1.2              |
|java.sql.Date | v1.3|
|java.sql.Time | v1.3|
|java.sql.Timestamp | v1.3|
|java.time.LocalDateTime | v1.3|
|java.time.LocalDate | v1.3|
|java.time.LocalTime | v1.3|
|java.time.OffsetDateTime | v1.3|
|java.time.OffsetTime | v1.3|
|java.time.ZonedDateTime | v1.3|
| java.lang.Byte       |   v1.6.0              |






The method generated sql
-----------------------------------------------------------------------------------------
Given a domain class User  

field name  | type
-----   | ------
id      | Integer
userName | String
password | String

table name is user  

And the resultMap is  

	<resultMap id="AllCoumnMap" type="com.codehelper.domain.User">
	    <result column="id" property="id"/>
	    <result column="user_name" property="userName"/>
	    <result column="password" property="password"/>
	</resultMap>


the following is the sql for the method name (method name using upper and lower case is the same for generate)   


here are the comparator can be used after field.  

comparator  | generated sql |starting support plugin version   
------- | -------- |---------
between |  prop > {} and prop <{}  |v1.3
betweenOrEqualto | prop >={} and prop <={} | v1.3
lessThan  | prop < {} | v1.3
lessThanOrEqualto | prop <={}  |v1.3
greaterThan | prop > {} |v1.3
greaterThanOrEqualto | prop >={} | v1.3
isnull | prop is null |v1.3
notnull | prop is not null |v1.3
like   | prop like {} |v1.3
in     | prop in {} |v1.3
notin  | prop not in {} |v1.3
not    | prop != {} |v1.3
notlike | prop not like {} |v1.3
startingWith | prop like {}% |v1.6.0
endingWith | prop like %{} |v1.6.0
containing | prop like %{}% |v1.6.0



- find method.  

support fetch mutiple field，mutiple field query after by.  
support orderBy,distinct,findFirst

method name       |  sql
-----------  |  --------------
find         | select * from user
findUserName | select user_name from user
findById	| select * from user where id = {}
findByIdGreaterThanAndUserName | select * from user where id > {} and user_name = {}
findByIdGreaterThanOrIdLessThan | select * from user where id > {} or id < {}
findByIdLessThanAndUserNameIn  | select * from user where id < {} and user_name in {}
findByUserNameAndPassword      | select * from user where user_name = {} and password = {}
findUserNameOrderByIdDesc   | select user_name from user order by id desc
findDistinctUserNameByIdBetween | select distinct(user_name) from user where id >= {} and id <={}
findOneById	| select * from user where id = {} limit 1
findFirstByIdGreaterThan | select * from user where id > {} limit 1
findFirst20ByIdLessThan  | select * from user where id < {} limit 20
findFirst10ByIdGreaterThanOrderByUserName  | select * from user where id > {} order by user_name limit 10
findMaxIdByUserNameGreaterThan | select max(id) from user where user_name > {}
findMaxIdAndMinId   | select max(id) as maxId, min(id) as minId from user


- update method  the query rule is same to find 

method name     | sql
---------- |  -------
updateUserNameById | update user set user_name = {} where id = {}
updateUserNameAndPasswordByIdIn  | update user set user_name = {} and password = {} where id in {}

- delete method
query rule is same to find 

method name  |  sql
------- | ---------
deleteById | delete from user where id = {}
deleteByUserNameIsNull  | delete from user where user_name is null

- count method 
support distinct

method name  | sql
------- | ----------
count   | select count(1) from user
countDistinctUserNameByIdGreaterThan | select count(distinct(user_name)) from user where id > {}



CHANGELOG
------------------------------------------------

1.6.0
- support to generate if test on method name to xml
- support generate multiple column index and multiple column unique
- support generate max,min,sum function on method name to xml
- support findOne,startingwith,endingwith,after,before grammar
- support to generate dto on find multiple field
- support to generate service and service interface
- not using as pojo as param
- fix to support java.lang.Byte

1.4.2
- support oracle
- could configure useGenerateKey
- resultMap refid keyProperty if test auto complete
- support java8 time type
- using new pic
- auto import after generate the method sql
- bugfix 


1.2
- jump to mapper to dao
- use alt+insert to generate xml
- the method name can generate xml sql
- and method name auto complete
----------------------------------

the screenshot is from [https://github.com/gejun123456/codehelperPluginDemo](https://github.com/gejun123456/codehelperPluginDemo)


[plugin]: https://plugins.jetbrains.com/plugin/9837





